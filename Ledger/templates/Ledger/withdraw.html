{% extends 'base.html' %}
{% block title %}উত্তোলন{% endblock title %}
{% block style %}
<style>
    .full-details {display: none;}
    #filter select, #buttons button, #buttons a {
        border-radius:0rem;
    }
    .price{display: none;}
</style>
{% endblock style %}
{% load extra_tags %}
{% load bootstrap4 %}
{% block main %}

<div class="d-print-none">
    {% if filter_form %}
    <form method="get" class="row" id="filter">
        <div class="p-2 ml-2">হিসাবের মাস</div>
        <div class="col-md-3 p-0">{% bootstrap_field filter_form.month layout='horizontal' show_label=False field_class='col-12' label_class='col-0' %}</div>
        <div class="col-md-2 p-0">{% bootstrap_field filter_form.year layout='horizontal' show_label=False field_class='col-12' label_class='col-0' %}</div>
        <div class="col-md-3 p-0" id="buttons">
            {% bootstrap_button 'Go' button_type='submit' button_class='btn btn-success' %}
            <a href="{% url 'withdraw-ledger' month=prev.month year=prev.year %}" class="btn btn-info"><i class="bi bi-chevron-left"></i></a>
            <a href="{% url 'withdraw-ledger' month=next.month year=next.year %}" class="btn btn-info"><i class="bi bi-chevron-right"></i></a>
        </div>
    </form>
    {% endif %}
</div>

<div class="bangla">
    <div class="text-center">
        <h3>উত্তোলন</h3>
        <h4>{% if month %}{{month|e2b_month}} {{year|e2b_digit}} এর {% endif %}খতিয়ান</h4>
    </div>

    <table class="table table-striped table-bordered table-sm">
        <tr class="text-center">
            <th>তারিখ</th>
            {% for owner in owners %}
            <th>{{owner.name}}</th>
            {% endfor %}
            <th>মোট</th>
        </tr>
        {% for row in data %}
        <tr>
            <td>{{row.date|e2b_date}}</td>
            {% for owner in row.owners %}
            {% if owner %}
            <td>
                {% for withdraw in owner %}
                <div class="row">
                    <div class="col">{{withdraw.detail}}</div>
                    <div class="col text-right">{{withdraw.amount|e2b_digit|ezynumber}}/=</div>
                </div>
                {% endfor %}
            </td>
            {% else %}<td></td>
            {% endif %}
            {% endfor %}
            <td class="text-right">{{row.total|e2b_digit|ezynumber}}/=</td>
        </tr>
        {% endfor %}
        <tr class="text-right">
            <td>মোটঃ</td>
            {% for amount in totals.values %}
            <td>{% if amount %}{{amount|e2b_digit|ezynumber}}/={% endif %}</td>
            {% endfor %}
            <td>{% if grand_total %}{{grand_total|e2b_digit|ezynumber}}/={% endif %}</td>
        </tr>
    </table>
</div>

{% endblock main %}