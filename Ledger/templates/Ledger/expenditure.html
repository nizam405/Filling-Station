{% extends 'base.html' %}
{% block title %}ব্যয়সমূহ{% endblock title %}
{% block style %}
<style>
    .full-details {display: none;}
    #filter select, #buttons button, #buttons a {
        border-radius:0rem;
    }
    .price{display: none;}
</style>
{% endblock style %}
{% load extra_tags %}
{% load bootstrap4 %}
{% block main %}

<div class="d-print-none">
    {% if filter_form %}
    <form method="get" class="row" id="filter">
        <div class="p-2 ml-2">হিসাবের মাস</div>
        <div class="col-md-3 p-0">{% bootstrap_field filter_form.month layout='horizontal' show_label=False field_class='col-12' label_class='col-0' %}</div>
        <div class="col-md-2 p-0">{% bootstrap_field filter_form.year layout='horizontal' show_label=False field_class='col-12' label_class='col-0' %}</div>
        <div class="col-md-3 p-0" id="buttons">
            {% bootstrap_button 'Go' button_type='submit' button_class='btn btn-success' %}
            <a href="{% url 'expenditure-ledger' month=prev.month year=prev.year %}" class="btn btn-info"><i class="bi bi-chevron-left"></i></a>
            <a href="{% url 'expenditure-ledger' month=next.month year=next.year %}" class="btn btn-info"><i class="bi bi-chevron-right"></i></a>
        </div>
    </form>
    {% endif %}
</div>

<div>
    <div class="text-center">
        <h3>ব্যয়সমূহ</h3>
        <h4>{% if month %}{{month|e2b_month}}, {{year|e2b_digit}} এর {% endif %}খতিয়ান</h4>
    </div>

    <table class="table table-striped table-bordered table-sm">
        <tr class="text-center">
            <th>তারিখ</th>
            {% for rg in expenditure_groups %}
            <th>{{rg.name}}</th>
            {% endfor %}
            <th>মোট</th>
        </tr>
        {% for expenditure in data %}
        <tr>
            <td>{{expenditure.date|e2b_date}}</td>
            {% for rg in expenditure.groups %}
            <td class="text-right">{% if rg > 0 %}{{rg|e2b_digit|ezynumber}}/={% endif %}</td>
            {% endfor %}
            <td class="text-right">{{expenditure.total|e2b_digit|ezynumber}}/=</td>
        </tr>
        {% endfor %}
        <tr class="text-right">
            <td>মোটঃ</td>
            {% for total in totals.values %}
            <td>{% if total %}{{total|e2b_digit|ezynumber}}/={% endif %}</td>
            {% endfor %}
            <td>{% if total %}{{total|e2b_digit|ezynumber}}/={% endif %}</td>
        </tr>
    </table>
</div>

{% endblock main %}