{% extends 'base.html' %}
{% block title %}আয়-ব্যায় বিবরণী{% endblock title %}
{% block style %}
<style>
    @media print{
        #full-ledger a {
            text-decoration: none;
        }
    }
    
    #date-filter select, #date-filter button, #date-filter a {
        border-radius:0rem;
    }
</style>
{% endblock style %}
{% load extra_tags %}
{% load bootstrap4 %}
{% block main %}

<div class="d-print-none">
    <form method="get" class="d-flex" id="date-filter">
        <div class="py-2 mr-2">হিসাবের মাস</div>
        <div>{% bootstrap_field date_form.month layout='horizontal' show_label=False field_class="col-12" %}</div>
        <div>{% bootstrap_field date_form.year layout='horizontal' show_label=False field_class="col-12" %}</div>
        <div>
            <button type="submit" class="btn btn-success">GO</button>
            <a href="{% url 'incomestatement' month=prev.month year=prev.year %}" class="btn btn-info"><i class="bi bi-chevron-left"></i></a>
            <a href="{% url 'incomestatement' month=next.month year=next.year %}" class="btn btn-info"><i class="bi bi-chevron-right"></i></a>
        </div>
    </form>
</div>

<div class="text-center d-none d-print-block" id="header">
    <h3>প্রধান সি এন জি এন্ড ফিলিং স্টেশন</h3>
    <h3>মাসিক আয়-ব্যায় বিবরণী</h3>
    <h4>{{month|e2b_month}},{{year|e2b_digit}}</h4>
</div>

<div class="row">
    <div class="col-md-6 pr-1">
        <table class="table table-bordered table-striped table-sm">
            <tr class="text-center">
                <th>আয়সমূহ</th>
                <th>টাকা</th>
                <th>টাকা</th>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </div>
    <div class="col-md-6 pl-1">
        <table class="table table-bordered table-striped table-sm">
            <tr class="text-center">
                <th>ব্যায়সমূহ</th>
                <th>টাকা</th>
                <th>টাকা</th>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </div>
</div>


<script>
    $('.new-window').click(function(){
        const content = $(this).parent()
        const newWindow = $('html').clone()
        newWindow.find('#full-ledger').html(content.html())
        newWindow.find('.new-window').remove()
        console.log(newWindow.html())

        let winPrint = window.open('','',
            'left=0,width=800,height=900,toolbar=0,scrollbars=0,status=0');
        winPrint.document.write(newWindow.html())
        winPrint.document.close()
        winPrint.focus()
        // $(winPrint).ready(function(){
        //     winPrint.print()
        //     winPrint.close()
        // })
    })
</script>
{% endblock main %}